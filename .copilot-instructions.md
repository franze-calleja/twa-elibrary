# GitHub Copilot Instructions - TWA E-Library System

> ğŸ“Œ **Main instructions are in `.github/copilot-instructions.md`**
> This file serves as a quick reference. For comprehensive guidelines, see the main file.

---

## ğŸ¯ Quick Context

**Project**: University e-library management system with barcode scanning  
**Stack**: Next.js 15 (App Router) + TypeScript + Prisma + MySQL + Shadcn UI  
**Roles**: Staff (manage books/students/transactions) & Students (borrow books via scanning)

---

## âš¡ Core Principles

1. **Strict TypeScript** - No `any` types, leverage Prisma types
2. **Server Components by default** - Add `'use client'` only when needed
3. **Validate everything** - Use Zod for all inputs
4. **Consistent API format** - `{ success: boolean, data/error }`
5. **Transactions for multi-step operations** - Use `prisma.$transaction()`
6. **Mobile-first responsive** - Test on all screen sizes
7. **Accessible** - WCAG 2.1 AA compliant

---

## ğŸ“ Key Paths

- Components: `@/components/...`
- API Routes: `app/api/...`
- Utilities: `@/lib/...`
- Hooks: `@/hooks/...`
- Stores: `@/store/...`
- Types: `@/types/...`

---

## ğŸ”‘ Essential Patterns

### API Route Template
```typescript
export async function POST(request: NextRequest) {
  try {
    const user = await verifyAuth(request)
    const body = await request.json()
    const validated = schema.parse(body)
    
    // Business logic here
    
    return NextResponse.json({ success: true, data })
  } catch (error) {
    return NextResponse.json({ success: false, error }, { status: 500 })
  }
}
```

### Form with Validation
```typescript
const form = useForm<FormData>({
  resolver: zodResolver(schema)
})

const onSubmit = (data: FormData) => {
  mutation.mutate(data)
}
```

### Data Fetching
```typescript
export function useBooks() {
  return useQuery({
    queryKey: ['books'],
    queryFn: () => axios.get('/api/books').then(r => r.data.data)
  })
}
```

---

## ğŸ—ï¸ Business Rules

**Borrowing Eligibility**: Book available âœ“ Student active âœ“ Within limit âœ“ No overdue âœ“ No unpaid fines âœ“  
**Barcode Format**: `LIB-{YEAR}-{SEQUENCE}` (e.g., LIB-2026-00001)  
**Due Date**: Current date + loan period (default 14 days)  
**Fine**: `daysOverdue Ã— finePerDay`

---

## ğŸ“š Full Documentation

For complete guidelines, see:
- **`.github/copilot-instructions.md`** â† Main comprehensive guide
- `/twa-elibrary-documentation/` â† All project docs

---

**Remember**: Quality over speed. Write clean, type-safe, maintainable code! ğŸš€
